(()=>{"use strict";const e=class{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.closePopup()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popup=e}openPopup(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}closePopup(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup_open")||e.target.classList.contains("popup__close"))&&this.closePopup()}))}},t=class extends e{constructor(e,t){super(e),this._submitCallback=t,this._form=this._popup.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}_getInputValues(){return this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{this._submitCallback(this._getInputValues()),this.closePopup()}))}closePopup(){super.closePopup(),this._form.reset()}};var s,r=document.querySelectorAll(".popup"),i=document.querySelector(".popup_edit-profile"),n=document.querySelector(".profile__edit-button"),o=document.querySelector(".popup_add-element"),p=document.querySelector(".profile__add-button"),a=document.querySelector(".popup__form_edit-profile"),u=document.querySelector(".popup__input_type_name"),l=document.querySelector(".popup__input_type_profession"),c=document.querySelector(".popup_big"),_=document.querySelector(".elements"),d=document.querySelector(".template").content,h={},m=new class{constructor(e,t,s){this._component=e,this._cards=t,this._renderer=s,this.renderItems()}addCard(e){var t=this._renderer(e);this._component.append(t)}renderItems(){this._cards.forEach((e=>{this.addCard(e)}))}prependCard(e){var t=this._renderer(e);this._component.prepend(t)}}(_,[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],(function(e){return new class{constructor(e,t,s){var r,i;i=()=>{this._view.remove()},(r="_remove")in this?Object.defineProperty(this,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[r]=i,this._item=e,this._view=t.querySelector(".element").cloneNode(!0),this._remove=this._remove.bind(this),this._cardImage=this._view.querySelector(".element__image"),this._handleCardClick=s,this._buttonDelete=this._view.querySelector(".element__delete")}_toggleHeart(e){e.target.classList.toggle("mask-group__heard_black")}_setEventListeners(){this._view.querySelector(".mask-group__heard").addEventListener("click",this._toggleHeart),this._buttonDelete.addEventListener("click",this._remove),this._cardImage.addEventListener("click",(()=>{this._handleCardClick(this._item.name,this._item.link)}))}render(){return this._view.querySelector(".mask-group__description").textContent=this._item.name,this._cardImage.src=this._item.link,this._cardImage.alt=this._item.name,this._setEventListeners(),this._view}}(e,d,E).render()})),v=new t(i,(e=>{b.setUserInfo(e.name,e.profession)})),f=new t(o,(function(e){var t={name:e.name,link:e.description};m.prependCard(t)})),y=new class extends e{constructor(e){super(e),this._link=this._popup.querySelector(".popup__image"),this._name=this._popup.querySelector(".popup__title")}openPopup(e,t){this._link.src=t,this._link.alt=e,this._name.textContent=e,super.openPopup()}}(c),b=new class{constructor(e,t){this._name=document.querySelector(e),this._description=document.querySelector(t)}getUserInfo(){return this._userInfo={name:this._name.textContent,description:this._description.textContent}}setUserInfo(e,t){this._name.textContent=e,this._description.textContent=t}}(".profile__name",".profile__profession");function E(e,t){y.openPopup(e,t)}n.addEventListener("click",(()=>{var e=b.getUserInfo(),t=e.name,s=e.description;u.value=t,l.value=s;var r=a.getAttribute("name");h[r].resetValidation(),v.openPopup()})),p.addEventListener("click",(()=>{var e=o.querySelector("form").getAttribute("name");h[e].resetValidation(),f.openPopup()})),f.setEventListeners(),v.setEventListeners(),y.setEventListeners(),window.addEventListener("load",(()=>{r.forEach((e=>e.classList.add("popup_transition")))})),s={formSelector:".popup__form",inputSelector:".popup__input",inputErrorClass:"popup__input_error",submitButtonSelector:".popup__button",submitButtonErrorClass:"popup__button_invalid"},Array.from(document.querySelectorAll(s.formSelector)).forEach((e=>{var t=new class{constructor(e,t){this._config=t,this._form=e,this._inputs=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector)}_handleSubmit(e){e.preventDefault()}_setSubmitButtonState(){this._buttonElement.disabled=!this._form.checkValidity(),this._buttonElement.classList.toggle(this._config.submitButtonErrorClass,!this._form.checkValidity())}_handleFiledValidation(e){this._setSubmitButtonState(),e.validity.valid?this._hideError(e,this._form):this._showError(e,this._form)}_showError(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage}_hideError(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent=""}_hasInvalidInput(){return this._inputs.some((e=>!e.validity.valid))}resetValidation(){this._setSubmitButtonState(),this._inputs.forEach((e=>{this._hideError(e)}))}_setEventListeners(){this._form.addEventListener("submit",(e=>{this._handleSubmit(e)})),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._handleFiledValidation(e),this._setSubmitButtonState()}))}))}enableValidation(){this._setEventListeners()}}(e,s),r=e.getAttribute("name");h[r]=t,t.enableValidation()}))})();